# Claude.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Goal

The goal is to polish my CV and make it ready to land my next awesome position. Target market is Switzerland. I am currently working as a Senior Data Scientist (at least by official title) with a gross salary of 122 kCHF. I aim for a 15% salary increase.

My next job should be more on the ML Ops / AI Software Architecture side of things. I am reluctant to take on a manager position, but it might be an option if the position is a fit. Something along the job titles of Engineering Manager, ML Engineer, ML Ops.
Mid-term I would like to transition out of the stressful daily hustle of keeping up with current developments and become more of a mentor or coach, enabling teams in my areas of expertise.

For now, we are working on a generic Resume that will work for the target roles in the target market. Later on, we will work on specific job postings to tune the resume to fit perfectly.


## Repository Overview

This is a LaTeX-based CV/Resume repository containing bilingual curriculum vitae documents in English and German for Florian Hochstrasser.

## File Structure

### Legacy Files (maintained for compatibility)
- `CV_en_Florian_Hochstrasser.tex` - Current English version of the CV
- `CV_de_Florian_Hochstrasser.tex` - German version of the CV (to be updated)
- `resumes_compiled/yyyy_mm_dd_hh_mm_CV_*.pdf` - Historical compiled PDF versions

### New Data-Driven System
- `docs/PERSONAL_PROFILE.md` - **Primary data source** - comprehensive personal/professional information
- `docs/` - Supporting documents, research, and analysis results
- `resumes/templates/` - Single generic LaTeX template with comprehensive customization guidance
  - `CV_template.tex` - Universal template for all role types (ML Engineer, MLOps, Manager, etc.)
- `resumes/customized/` - Job-specific customized resume variations
  - `YYYY_MM_DD_company_role.tex` - LaTeX source files
  - `YYYY_MM_DD_company_role.pdf` - Compiled PDF resumes (temporarily, before moving to compiled/)
  - `YYYY_MM_DD_company_role_application_strategy.md` - Application strategy documents (auto-generated by career-planning-coach)
- `resumes/compiled/` - Final timestamped PDF outputs (YYYY_MM_DD_HH_MM_company_role_CV_lang.pdf)
- `resources/CV_Portrait_*.jpg` - Portrait photos used in the CV

## Build Commands

### Legacy System
The original LaTeX files are configured to use XeLaTeX:
```bash
# Current English version
xelatex CV_en_Florian_Hochstrasser.tex

# German version (to be updated with new system)
xelatex CV_de_Florian_Hochstrasser.tex
```

### New Template System
The generic template should be copied and customized for each job application:
```bash
# Create customized version for specific job
cp resumes/templates/CV_template.tex resumes/customized/YYYY_MM_DD_company_role.tex

# Edit customized version by replacing [PLACEHOLDER] values and tailoring sections
# (Reference CV_template.tex inline comments for guidance)

# Compile from customized directory
cd resumes/customized/
xelatex YYYY_MM_DD_company_role.tex

# Move compiled PDF to organized storage with timestamp
mv YYYY_MM_DD_company_role.pdf ../compiled/YYYY_MM_DD_HH_MM_company_role_CV_en.pdf
```

### Clean-up
After compilation, always clean up temporary files: `*.aux`, `*.log`, `*.out`, `*.fls`, `*.fdb_latexmk`, `*.gz`, `*.toc`, `*.bbl`, `*.blg`

Note: All templates use the `moderncv` LaTeX class and require XeLaTeX or LuaLaTeX for proper compilation.

### Web Resume Build

Web resumes are built and deployed by the `react-resume-expert` agent after content approval.

**Workflow:**
1. `resume-content-generator` creates `resume_content.md` from PERSONAL_PROFILE.md + strategy
2. `swiss-tech-resume-reviewer` reviews and approves `resume_content.md` (Pattern A)
3. **USER DECISION GATE**: `career-planning-coach` asks user: "Format: PDF, web, or both?"
4. Based on selection:
   - **If PDF selected**: Invoke `latex-moderncv-expert` to render PDF from resume_content.md
   - **If web selected**:
     a. Ask: "Preview before deploying? (recommended)"
     b. If yes: Invoke `react-resume-expert(mode="preview")`
     c. User reviews at http://localhost:4173/CV-pages/
     d. Ask: "Deploy to CV-pages?"
     e. If yes: Invoke `react-resume-expert(mode="deploy")`
5. PDF undergoes post-render QA (swiss-tech-resume-reviewer + latex-design-reviewer)
6. career-planning-coach performs final holistic review
7. Application strategy document generated with resume URLs/paths

**Preview Mode:**
- Slash command: `/preview-web-resume {id}`
- No `CV_PAGES_TOKEN` required
- Opens local server: http://localhost:4173/CV-pages/
- Use during development or before final deployment
- Can be run multiple times during content iteration

**Deploy Mode:**
- Requires `CV_PAGES_TOKEN` environment variable (see README.md)
- Deploys to private `CV-pages` repository `gh-pages` branch
- URL format: `https://datarian.github.io/CV-pages/cv/{semantic-id}`
- Semantic ID: `{date}_{company_lowercase}_{content_hash}`

**Requirements:**
- Preview: Web builder dependencies installed (`cd resumes/web-builder && npm install`)
- Deploy: `CV_PAGES_TOKEN` configured + private `CV-pages` repo exists with `gh-pages` branch

**Important:** Web builds NEVER exist in base repository. All building happens in temporary memory locations and is cleaned up immediately after each operation (preview or deployment).

**Manual preview (if needed):**
```bash
/preview-web-resume 2025_11_10_quantumbasel_ai_specialist
```

**Manual build (for debugging):**
```bash
cd resumes/web-builder
cp ../customized/{id}/resume_content.md public/
npm run build
npm run preview
```

## LaTeX Dependencies

The CV uses:
- `moderncv` document class with **`fancy` style (REQUIRED)**
- Custom fonts via `fontspec` (Roboto, Lato, Roboto Slab)
- `moderntimeline` package for timeline visualizations
- `fontawesome` for icons
- Multiple language support via `babel`

### CRITICAL: ModernCV Style Requirement
**ALWAYS use `\moderncvstyle{fancy}` for all CVs in this repository.**

- The `fancy` style is MANDATORY because it properly handles multi-page documents
- The `casual` style has a fundamental bug causing "Unbalanced output routine" errors on multi-page CVs
- NEVER use `casual`, `classic`, `banking`, or `oldstyle` styles
- All templates have been updated to use `fancy` style
- See `docs/MODERNCV_DOC.md` for detailed technical documentation

## Development Notes

- The `.gitignore` excludes LaTeX build artifacts (`*.log`, `*.aux`, `*.out`, `*.gz`)
- Both CV versions use similar styling with custom color definitions
- Primary data source is `docs/PERSONAL_PROFILE.md` - comprehensive profile with all professional information
- If information is missing, first check `MISSING_INFORMATION.md`, then ask the user
- All resume generation should reference the PERSONAL_PROFILE.md for consistency and completeness

## Web Resources

Statistical Salary Calculator: https://www.salarium.bfs.admin.ch/

### Job Search Portals
See comprehensive list in `docs/JOB_AGENT_RESEARCH.md` (maintained by swiss-tech-job-market-analyst agent)

## Agent Invocation

### Standard Agent Commands
Use the Task tool to invoke agents. All agents follow consistent patterns:
- **Primary coordination**: career-planning-coach manages workflow and user interactions
- **Proactive invocation**: Agents should be invoked automatically when their expertise is needed
- **Agent sequence**: Follow the established workflow phases (Market Analysis → Resume Strategy → Template Development → Quality Assurance)

### When to Invoke Agents
- **swiss-tech-job-market-analyst**: When analyzing job requirements, salary research, or market positioning
- **swiss-resume-expert**: When creating or optimizing resume content strategy and positioning
- **resume-content-generator**: After strategy approval, to transform PERSONAL_PROFILE.md into structured resume_content.md
- **swiss-tech-resume-reviewer**: To review resume_content.md (Pattern A) or final PDF output before submission
- **latex-moderncv-expert**: After content approval when PDF format selected, to render LaTeX PDF from resume_content.md
- **react-resume-expert**: After content approval when web format selected, to build/deploy interactive web resume
- **latex-design-reviewer**: After PDF generation to ensure visual quality and style guide compliance

## File Management

### LaTeX Build Artifacts
Always clean up after compilation:
```bash
rm -f *.aux *.log *.out *.fls *.fdb_latexmk *.gz *.toc *.bbl *.blg
```

### Agent-Generated Files
- **Temporary files**: Remove agent-generated files from `.claude/` after integration into `docs/`
- **Research files**: Consolidate all market research into `docs/JOB_AGENT_RESEARCH.md`
- **Analysis files**: Merge insights into existing documentation rather than creating new files

### Directory Organization
- **Keep clean**: Remove duplicate or outdated files promptly
- **Naming convention**: Use timestamps for compiled PDFs: `YYYY_MM_DD_HH_MM_role_CV_lang.pdf`
- **Version control**: Track significant template changes and customizations


## Workflow

### Data-Driven Resume Generation System

The CV repository now uses a flexible, data-driven approach with the following structure:

#### Core Data Source
- **docs/PERSONAL_PROFILE.md**: Comprehensive personal and professional information database
- Single source of truth for all resume variations
- Structured sections covering experience, skills, achievements, projects

#### Template System
- **resumes/templates/**: Single generic LaTeX template pulling data from PERSONAL_PROFILE.md
  - `CV_template.tex`: Universal template with comprehensive customization guidance for all role types (ML Engineer, MLOps, Manager, etc.)
- **resumes/customized/**: Job-specific customized resumes
- **resumes/compiled/**: Timestamped PDF outputs

#### Generation Workflow
1. **Template Copying**: Copy the generic template (`CV_template.tex`) to `customized/` with appropriate naming
2. **Customization**: Tailor the template for specific job by replacing placeholders and adjusting section emphasis
3. **Compilation**: Generate PDF with timestamp in `compiled/` folder
4. **Version Control**: Track customizations and compiled outputs

### Agent Coordination

#### Primary Coordination Agent
- **career-planning-coach**: YOU MUST coordinate with specialized agents and manage user interactions

#### Specialized Agent Workflow

**Phase 1: Market Analysis**:
1. **swiss-tech-job-market-analyst**: Market research, salary analysis, skills gap identification
   - Input: Target role, company, industry requirements
   - Output: Market insights, required technologies, salary expectations

**Phase 2: Resume Strategy**:
2. **swiss-resume-expert**: Resume strategy and content planning
   - Input: Market analysis, PERSONAL_PROFILE.md data
   - Output: Content strategy, section emphasis, keyword recommendations

**Phase 3: Content Generation (Content-First Approach)**:
3. **resume-content-generator**: Transform profile data into structured resume content
   - Input: PERSONAL_PROFILE.md, strategic guidance from swiss-resume-expert
   - Output: `resumes/customized/{id}/resume_content.md` (YAML + Markdown)
   - Role: Single source of truth for both PDF and web renderers

**Phase 4: Content Quality Review (Pattern A - PREFERRED)**:
4. **swiss-tech-resume-reviewer**: Review content BEFORE rendering
   - Input: `resume_content.md`, target role requirements
   - Output: Content rating, ATS keyword match, improvement recommendations
   - **CRITICAL**: Reviews content directly, not PDF. Faster iteration without compilation delays.
   - Iterates with resume-content-generator until content quality meets standards (≥8.0/10, ≥75% ATS match)

**Phase 5: Format Selection & Rendering**:

**User Decision Gate**: career-planning-coach asks user to select format:
- PDF only (traditional, ATS-optimized)
- Web only (modern, interactive)
- Both PDF and web (recommended)

Based on user selection:

5a. **latex-moderncv-expert** (if PDF selected): LaTeX PDF generation
   - Input: Approved `resume_content.md`
   - Output: Compiled PDF in `resumes/compiled/{timestamp}_{id}_CV_en.pdf`
   - Role: Renders content to LaTeX, compiles with XeLaTeX
   - Invoked by: career-planning-coach after content approval

5b. **react-resume-expert** (if web selected): React web resume generation
   - Input: Approved `resume_content.md`
   - Output: Static site deployed to CV-pages (or local preview)
   - Modes: Preview (local) or Deploy (GitHub Pages)
   - Invoked by: career-planning-coach after content approval

**Phase 6: Design Quality Assurance (ITERATIVE)**:

6. **swiss-tech-resume-reviewer** (PDF content verification):
   - Input: Rendered PDF output, target role requirements
   - Output: Final content validation after rendering
   - **CRITICAL**: If changes needed, invokes **latex-moderncv-expert** to implement fixes
   - Iterates until content rendering quality meets standards

7. **latex-design-reviewer** (PDF visual design):
   - Input: Content-approved PDF output
   - Output: Design recommendations, formatting improvements
   - **CRITICAL**: If changes needed, invokes **latex-moderncv-expert** to implement fixes
   - Iterates until design quality is satisfactory (≥9.0/10)

#### Complete Agent Workflow Diagram

```
                    ┌─────────────────────────────────────────┐
                    │   career-planning-coach                 │
                    │   (Primary Orchestrator)                │
                    └───────────────┬─────────────────────────┘
                                    │
        ┌───────────────────────────┼───────────────────────┐
        │                           │                       │
        ▼                           ▼                       ▼
swiss-tech-job-           swiss-resume-expert    [PERSONAL_PROFILE.md]
market-analyst            (Content Strategy)      (Data Source)
(Market Research)                 │                       │
        │                         │                       │
        └─────────────────────────┴───────────────────────┘
                                  │
                                  ▼
                      ┌───────────────────────┐
                      │ resume-content-       │
                      │ generator             │
                      │ Creates resume_       │
                      │ content.md            │
                      └───────────┬───────────┘
                                  │
                                  │ YAML + Markdown
                                  │ (Single source of truth)
                                  ▼
                      ┌───────────────────────┐
                      │ swiss-tech-resume-    │◄─┐
                      │ reviewer              │  │
                      │ (Pattern A: Review    │  │
                      │  content BEFORE       │  │ iterate on
                      │  rendering)           │  │ content
                      └───────────┬───────────┘  │
                                  │              │
                          Content approved?      │
                          (≥8.0/10, ≥75% ATS)    │
                                  │              │
                              YES │  NO ─────────┘
                                  │
                                  ▼
                      ┌───────────────────────┐
                      │ USER DECISION GATE    │
                      │ Format Selection:     │
                      │ • PDF only            │
                      │ • Web only            │
                      │ • Both (recommended)  │
                      └───────────┬───────────┘
                                  │
            ┌─────────────────────┴─────────────────────┐
            │                                           │
            ▼                                           ▼
┌───────────────────────┐                   ┌───────────────────────┐
│ latex-moderncv-expert │                   │ react-resume-expert   │
│ (PDF Renderer)        │                   │ (Web Renderer)        │
│                       │                   │                       │
│ Renders PDF from      │                   │ • Preview mode (local)│
│ resume_content.md     │                   │ • Deploy mode (pages) │
└───────────┬───────────┘                   └───────────┬───────────┘
            │                                           │
            │ Compiled PDF                              │ Web URL/Local
            ▼                                           ▼
┌───────────────────────┐                   [Web resume ready]
│ swiss-tech-resume-    │◄─┐
│ reviewer (PDF verify) │  │
└───────────┬───────────┘  │
            │              │
            ▼              │ iterate
┌───────────────────────┐  │ on PDF
│ latex-design-reviewer │──┘
│ (Visual QA)           │
└───────────┬───────────┘
            │
            │ Both reviewers approve
            ▼
┌───────────────────────────────────────────┐
│   career-planning-coach                   │
│   (Final Quality Gate)                    │
│   • Holistic career review                │
│   • Can trigger full re-iteration         │
│   • Generates application_strategy.md     │
└───────────────────────────────────────────┘
```

**Key Workflow Features**:

1. **Content-First Approach**: resume_content.md is reviewed and approved BEFORE rendering
2. **Pattern A Preferred**: Review content directly (not PDF) for faster iteration
3. **User Format Selection**: Explicit gate for PDF/web/both decision
4. **Parallel Rendering**: PDF and web renderers consume the same source independently
5. **Post-Render QA**: PDF undergoes additional content verification and design review
6. **Final Quality Gate**: career-planning-coach ensures holistic career narrative

**Iteration Process**:

**Pre-Rendering (Pattern A - PREFERRED)**:
1. **resume-content-generator** creates `resume_content.md` from PERSONAL_PROFILE.md + strategy
2. **swiss-tech-resume-reviewer** reviews content quality BEFORE rendering
   - Evaluates: Content quality, ATS keywords, Swiss market fit
   - Target: ≥8.0/10 rating, ≥75% ATS keyword match
   - If issues found: Provides feedback → resume-content-generator updates → Re-review
   - Maximum 3 iterations before escalation
3. When content approved: Proceed to format selection

**Format Selection**:
4. **career-planning-coach** asks user: "PDF only, web only, or both?"
5. Based on selection, invokes appropriate renderer(s):
   - **latex-moderncv-expert** (PDF): Renders resume_content.md → LaTeX → PDF
   - **react-resume-expert** (Web): Renders resume_content.md → React → static site

**Post-Rendering QA (PDF only)**:
6. **swiss-tech-resume-reviewer** verifies PDF content rendering
   - If issues found: Provides feedback → latex-moderncv-expert fixes → Re-compile → Re-review
7. **latex-design-reviewer** reviews visual design and layout
   - If issues found: Provides feedback → latex-moderncv-expert fixes → Re-compile → Re-review
   - Target: ≥9.0/10 design rating
8. **career-planning-coach** performs final holistic review
   - Reviews complete CV for overall career narrative and strategic positioning
   - If issues found: Identifies which specialist agents need to be re-engaged
   - Can trigger ONE full re-iteration cycle if needed
   - If satisfied: CV is approved for use and application_strategy.md is generated

**Final Quality Gate - career-planning-coach**:
The career-planning-coach performs a final holistic review to ensure:
- Career narrative is cohesive and compelling
- Strategic positioning aligns with target roles and market
- All elements work together to tell a unified story
- Resume achieves the user's career goals (15% salary increase, ML Ops/AI Architecture roles)
- Swiss market fit is optimal

If career-planning-coach identifies issues:
- Determines which specialist agents need to be re-engaged
- Can invoke any combination of: swiss-resume-expert, latex-design-reviewer, swiss-tech-resume-reviewer
- Full iteration cycle can be triggered for comprehensive improvements
- Maximum 1 full re-iteration to maintain efficiency

**Agent Communication Rules**:
- Reviewers MUST provide specific, actionable feedback
- Reviewers MUST invoke latex-moderncv-expert via Task tool for implementation
- latex-moderncv-expert MUST compile after each change and pass back to reviewers
- Maximum 3 iterations per reviewer to prevent endless loops
- career-planning-coach has authority to trigger ONE additional full iteration cycle
- If consensus cannot be reached after full process, escalate to user

#### Workflow Integration
- **Data-First Approach**: All agents reference PERSONAL_PROFILE.md for consistent information
- **Template-Based Efficiency**: Rapid customization using proven templates
- **Quality Pipeline**: Iterative review process ensuring high standards
- **Version Control**: Clear tracking of all variations and iterations
- **Feedback Loop**: Reviewers work with implementer until quality standards met

### New Workflow Steps
1. **Profile Maintenance**: Keep PERSONAL_PROFILE.md updated with new achievements
2. **Template Evolution**: Improve templates based on market feedback and success rates
3. **Customization Tracking**: Document what works for different company types
4. **Performance Analytics**: Track application success rates by template type

### Iterative Improvement Process
- Work iteratively with user feedback
- Present results and get approval before major changes
- Create PR to merge approved changes
- Compile final PDFs with timestamps in appropriate folders

### Application Strategy Documents

When the **career-planning-coach** approves a finalized resume, it MUST automatically generate a comprehensive application strategy document alongside the resume.

**Purpose**: Provide actionable guidance for the job application process, including cover letter strategies, salary negotiation tactics, interview preparation, and strategic assessment.

**Naming Convention**:
- Format: `YYYY_MM_DD_[company]_[role_short]_application_strategy.md`
- Example: `2025_10_14_frontify_senior_llm_engineer_application_strategy.md`
- Location: `/Users/flo/Development/CV/resumes/customized/` (same directory as resume)

**Required Content Sections**:
1. **Executive Summary** - Fit assessment and key selling points
2. **Position Overview** - Company details and role requirements
3. **Cover Letter Strategy** - Opening hook, key points, skills gap mitigation
4. **Salary Negotiation Strategy** - Target range, justification, walk-away point
5. **Interview Preparation** - Technical topics, STAR stories, questions to ask
6. **Application Timeline** - Optimal submission window, follow-up strategy
7. **Success Metrics** - Positive indicators and warning signs
8. **Strategic Assessment** - Career alignment, risks/mitigations, long-term positioning
9. **Key Talking Points** - Elevator pitch, top 3 differentiators
10. **Final Recommendations** - Apply decision, priority level, next actions

**Agent Responsibility**: The career-planning-coach agent has detailed templates and implementation instructions in its agent definition (`/.claude/agents/career-planning-coach.md`).

**File Pairing**: Each resume should have a corresponding application strategy document:
```
resumes/customized/
├── 2025_10_14_frontify_senior_llm_engineer.tex
├── 2025_10_14_frontify_senior_llm_engineer.pdf
└── 2025_10_14_frontify_senior_llm_engineer_application_strategy.md
```

**Usage**: Users reference the application strategy document when:
- Drafting cover letters
- Preparing for interviews
- Negotiating salary offers
- Evaluating job fit and career alignment 

## Key Constraints
- **ModernCV Style**: ALWAYS use `\moderncvstyle{fancy}` - this is MANDATORY for multi-page support
- **cventry Format**: All `\cventry` commands must have exactly 6 arguments: `\cventry{dates}{title}{company}{location}{}{description}`
- **Job titles**: Never change job titles of past or current employments
- **Compilation**: NEVER use pdflatex. Always compile with xelatex
- **Data source**: Always reference docs/PERSONAL_PROFILE.md as the single source of truth
- **File organization**: Templates in resumes/templates/, customizations in resumes/customized/, compiled PDFs in resumes/compiled/
- **Legacy compatibility**: Maintain historical PDFs in resumes_compiled/ for reference
- **Clean up**: Clean up any temporary files and experiments when you are done compiling a new version of the CV
- **Page count**: Do not feel you need to fit the whole CV on 1 page. 2-3 page CVs are preferred with room for comprehensive background
- **GitHub Repository Link**: ALWAYS include a link to the GitHub repository at the end of every generated resume with the text: "Curious how this resume was built? Explore the system at github.com/datarian/CV"
- **CV_PAGES_TOKEN**: Required environment variable for web deployment (not required for preview)
- **Web build privacy**: Web builds NEVER committed to base repo (all outputs gitignored)
- **Deployment timing**: Web building ONLY after swiss-tech-resume-reviewer approval (preview can happen anytime)
- **Preview availability**: Preview mode available during development without approval, no credentials required